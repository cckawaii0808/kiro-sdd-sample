"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[745],{6665:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"testing-guide","title":"\u6e2c\u8a66\u6307\u5357","description":"\u5b8c\u6574\u7684\u524d\u5f8c\u7aef\u6e2c\u8a66\u6559\u5b78\u3002","source":"@site/docs/testing-guide.md","sourceDirName":".","slug":"/testing-guide","permalink":"/kiro-sdd-sample/en/docs/testing-guide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6e2c\u8a66\u81ea\u52d5\u5316","permalink":"/kiro-sdd-sample/en/docs/testing-automation"}}');var l=s(4848),i=s(8453);const r={},c="\u6e2c\u8a66\u6307\u5357",a={},d=[{value:"\u5f8c\u7aef\u6e2c\u8a66",id:"\u5f8c\u7aef\u6e2c\u8a66",level:2},{value:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a",id:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a",level:3},{value:"1. \u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4",id:"1-\u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4",level:4},{value:"2. Jest \u914d\u7f6e",id:"2-jest-\u914d\u7f6e",level:4},{value:"\u55ae\u5143\u6e2c\u8a66",id:"\u55ae\u5143\u6e2c\u8a66",level:3},{value:"\u6e2c\u8a66\u8a08\u7b97\u6a5f\u5de5\u5177",id:"\u6e2c\u8a66\u8a08\u7b97\u6a5f\u5de5\u5177",level:4},{value:"API \u6574\u5408\u6e2c\u8a66",id:"api-\u6574\u5408\u6e2c\u8a66",level:3},{value:"\u6e2c\u8a66\u8a8d\u8b49 API",id:"\u6e2c\u8a66\u8a8d\u8b49-api",level:4},{value:"\u6e2c\u8a66\u8a08\u7b97\u6a5f API",id:"\u6e2c\u8a66\u8a08\u7b97\u6a5f-api",level:4},{value:"\u57f7\u884c\u6e2c\u8a66",id:"\u57f7\u884c\u6e2c\u8a66",level:3},{value:"\u57f7\u884c\u6240\u6709\u6e2c\u8a66",id:"\u57f7\u884c\u6240\u6709\u6e2c\u8a66",level:4},{value:"\u57f7\u884c\u7279\u5b9a\u6e2c\u8a66\u6a94\u6848",id:"\u57f7\u884c\u7279\u5b9a\u6e2c\u8a66\u6a94\u6848",level:4},{value:"\u76e3\u807d\u6a21\u5f0f\uff08\u81ea\u52d5\u91cd\u65b0\u57f7\u884c\uff09",id:"\u76e3\u807d\u6a21\u5f0f\u81ea\u52d5\u91cd\u65b0\u57f7\u884c",level:4},{value:"\u6e2c\u8a66\u8986\u84cb\u7387",id:"\u6e2c\u8a66\u8986\u84cb\u7387",level:4},{value:"\u6e2c\u8a66\u6700\u4f73\u5be6\u8e10",id:"\u6e2c\u8a66\u6700\u4f73\u5be6\u8e10",level:3},{value:"1. \u4f7f\u7528 describe \u5206\u7d44",id:"1-\u4f7f\u7528-describe-\u5206\u7d44",level:4},{value:"2. \u4f7f\u7528 beforeEach \u6e05\u7406",id:"2-\u4f7f\u7528-beforeeach-\u6e05\u7406",level:4},{value:"3. \u6e2c\u8a66\u908a\u754c\u60c5\u6cc1",id:"3-\u6e2c\u8a66\u908a\u754c\u60c5\u6cc1",level:4},{value:"4. \u6e2c\u8a66\u932f\u8aa4\u8655\u7406",id:"4-\u6e2c\u8a66\u932f\u8aa4\u8655\u7406",level:4},{value:"\u524d\u7aef\u6e2c\u8a66",id:"\u524d\u7aef\u6e2c\u8a66",level:2},{value:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a",id:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a-1",level:3},{value:"1. \u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4",id:"1-\u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4-1",level:4},{value:"2. Jest \u914d\u7f6e",id:"2-jest-\u914d\u7f6e-1",level:4},{value:"\u5143\u4ef6\u6e2c\u8a66",id:"\u5143\u4ef6\u6e2c\u8a66",level:3},{value:"\u6e2c\u8a66 Calculator \u5143\u4ef6",id:"\u6e2c\u8a66-calculator-\u5143\u4ef6",level:4},{value:"\u57f7\u884c\u524d\u7aef\u6e2c\u8a66",id:"\u57f7\u884c\u524d\u7aef\u6e2c\u8a66",level:3},{value:"\u6e2c\u8a66\u4f7f\u7528\u8005\u4e92\u52d5",id:"\u6e2c\u8a66\u4f7f\u7528\u8005\u4e92\u52d5",level:3},{value:"\u4f7f\u7528 userEvent",id:"\u4f7f\u7528-userevent",level:4},{value:"\u6e2c\u8a66 API \u547c\u53eb",id:"\u6e2c\u8a66-api-\u547c\u53eb",level:3},{value:"Mock API",id:"mock-api",level:4},{value:"\u6e2c\u8a66\u7b56\u7565",id:"\u6e2c\u8a66\u7b56\u7565",level:2},{value:"\u6e2c\u8a66\u91d1\u5b57\u5854",id:"\u6e2c\u8a66\u91d1\u5b57\u5854",level:3},{value:"\u6e2c\u8a66\u8986\u84cb\u7387\u76ee\u6a19",id:"\u6e2c\u8a66\u8986\u84cb\u7387\u76ee\u6a19",level:3},{value:"\u6e2c\u8a66\u6aa2\u67e5\u6e05\u55ae",id:"\u6e2c\u8a66\u6aa2\u67e5\u6e05\u55ae",level:3},{value:"\u5f8c\u7aef",id:"\u5f8c\u7aef",level:4},{value:"\u524d\u7aef",id:"\u524d\u7aef",level:4},{value:"CI/CD \u6574\u5408",id:"cicd-\u6574\u5408",level:2},{value:"GitHub Actions",id:"github-actions",level:3},{value:"\u5e38\u898b\u554f\u984c",id:"\u5e38\u898b\u554f\u984c",level:2},{value:"\u7e3d\u7d50",id:"\u7e3d\u7d50",level:2}];function o(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u6e2c\u8a66\u6307\u5357",children:"\u6e2c\u8a66\u6307\u5357"})}),"\n",(0,l.jsx)(n.p,{children:"\u5b8c\u6574\u7684\u524d\u5f8c\u7aef\u6e2c\u8a66\u6559\u5b78\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u5f8c\u7aef\u6e2c\u8a66",children:"\u5f8c\u7aef\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a",children:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4",children:"1. \u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd backend\nnpm install\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u5df2\u5b89\u88dd\u7684\u6e2c\u8a66\u5de5\u5177\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Jest"}),"\uff1a\u6e2c\u8a66\u6846\u67b6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Supertest"}),"\uff1aHTTP \u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"ts-jest"}),"\uff1aTypeScript \u652f\u63f4"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"2-jest-\u914d\u7f6e",children:"2. Jest \u914d\u7f6e"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"backend/jest.config.js"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  preset: 'ts-jest',\n  testEnvironment: 'node',\n  roots: ['<rootDir>/tests'],\n  testMatch: ['**/*.test.ts'],\n  collectCoverageFrom: [\n    'src/**/*.ts',\n    '!src/**/*.d.ts',\n  ],\n};\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u55ae\u5143\u6e2c\u8a66",children:"\u55ae\u5143\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h4,{id:"\u6e2c\u8a66\u8a08\u7b97\u6a5f\u5de5\u5177",children:"\u6e2c\u8a66\u8a08\u7b97\u6a5f\u5de5\u5177"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"backend/tests/calculator.test.ts"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { evaluateExpression } from '../src/utils/calculator';\n\ndescribe('Calculator Utils', () => {\n  it('should calculate addition', () => {\n    expect(evaluateExpression('2 + 3')).toBe(5);\n  });\n\n  it('should handle complex expressions', () => {\n    expect(evaluateExpression('2 + 3 * 4')).toBe(14);\n  });\n\n  it('should throw error for invalid expression', () => {\n    expect(() => evaluateExpression('2 + abc')).toThrow();\n  });\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u57f7\u884c\u55ae\u5143\u6e2c\u8a66"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm test calculator.test.ts\n"})}),"\n",(0,l.jsx)(n.h3,{id:"api-\u6574\u5408\u6e2c\u8a66",children:"API \u6574\u5408\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h4,{id:"\u6e2c\u8a66\u8a8d\u8b49-api",children:"\u6e2c\u8a66\u8a8d\u8b49 API"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"backend/tests/api.test.ts"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import request from 'supertest';\nimport app from '../src/index';\n\ndescribe('Auth API', () => {\n  it('should register a new user', async () => {\n    const res = await request(app)\n      .post('/api/auth/register')\n      .send({\n        email: 'test@example.com',\n        password: 'password123',\n        name: 'Test User',\n      });\n\n    expect(res.status).toBe(201);\n    expect(res.body).toHaveProperty('token');\n  });\n\n  it('should login with correct credentials', async () => {\n    // \u5148\u8a3b\u518a\n    await request(app)\n      .post('/api/auth/register')\n      .send({\n        email: 'test@example.com',\n        password: 'password123',\n        name: 'Test User',\n      });\n\n    // \u518d\u767b\u5165\n    const res = await request(app)\n      .post('/api/auth/login')\n      .send({\n        email: 'test@example.com',\n        password: 'password123',\n      });\n\n    expect(res.status).toBe(200);\n    expect(res.body).toHaveProperty('token');\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u6e2c\u8a66\u8a08\u7b97\u6a5f-api",children:"\u6e2c\u8a66\u8a08\u7b97\u6a5f API"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"describe('Calculator API', () => {\n  let token: string;\n\n  beforeEach(async () => {\n    // \u8a3b\u518a\u4e26\u53d6\u5f97 token\n    const res = await request(app)\n      .post('/api/auth/register')\n      .send({\n        email: 'test@example.com',\n        password: 'password123',\n        name: 'Test User',\n      });\n    token = res.body.token;\n  });\n\n  it('should calculate expression', async () => {\n    const res = await request(app)\n      .post('/api/calculator/calculate')\n      .set('Authorization', `Bearer ${token}`)\n      .send({ expression: '2 + 3' });\n\n    expect(res.status).toBe(200);\n    expect(res.body).toHaveProperty('result', 5);\n  });\n\n  it('should require authentication', async () => {\n    const res = await request(app)\n      .post('/api/calculator/calculate')\n      .send({ expression: '2 + 3' });\n\n    expect(res.status).toBe(401);\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u57f7\u884c\u6e2c\u8a66",children:"\u57f7\u884c\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h4,{id:"\u57f7\u884c\u6240\u6709\u6e2c\u8a66",children:"\u57f7\u884c\u6240\u6709\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm test\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u57f7\u884c\u7279\u5b9a\u6e2c\u8a66\u6a94\u6848",children:"\u57f7\u884c\u7279\u5b9a\u6e2c\u8a66\u6a94\u6848"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm test calculator.test.ts\nnpm test api.test.ts\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u76e3\u807d\u6a21\u5f0f\u81ea\u52d5\u91cd\u65b0\u57f7\u884c",children:"\u76e3\u807d\u6a21\u5f0f\uff08\u81ea\u52d5\u91cd\u65b0\u57f7\u884c\uff09"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm run test:watch\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u6e2c\u8a66\u8986\u84cb\u7387",children:"\u6e2c\u8a66\u8986\u84cb\u7387"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm run test:coverage\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8f38\u51fa\u7bc4\u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"--------------------|---------|----------|---------|---------|\nFile                | % Stmts | % Branch | % Funcs | % Lines |\n--------------------|---------|----------|---------|---------|\nAll files           |   85.71 |    83.33 |   88.89 |   85.71 |\n utils/calculator.ts|   100   |    100   |   100   |   100   |\n routes/auth.ts     |   80.5  |    75    |   85.7  |   80.5  |\n--------------------|---------|----------|---------|---------|\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u6700\u4f73\u5be6\u8e10",children:"\u6e2c\u8a66\u6700\u4f73\u5be6\u8e10"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u4f7f\u7528-describe-\u5206\u7d44",children:"1. \u4f7f\u7528 describe \u5206\u7d44"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"describe('User Model', () => {\n  describe('hashPassword', () => {\n    it('should hash password correctly', async () => {\n      // \u6e2c\u8a66\n    });\n  });\n\n  describe('comparePassword', () => {\n    it('should compare password correctly', async () => {\n      // \u6e2c\u8a66\n    });\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-\u4f7f\u7528-beforeeach-\u6e05\u7406",children:"2. \u4f7f\u7528 beforeEach \u6e05\u7406"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"describe('API Tests', () => {\n  beforeEach(() => {\n    // \u6e05\u9664\u8cc7\u6599\u5eab\n    db.clear();\n  });\n\n  it('should work', () => {\n    // \u6e2c\u8a66\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-\u6e2c\u8a66\u908a\u754c\u60c5\u6cc1",children:"3. \u6e2c\u8a66\u908a\u754c\u60c5\u6cc1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"it('should handle edge cases', () => {\n  expect(evaluateExpression('0 + 0')).toBe(0);\n  expect(evaluateExpression('-5 + 3')).toBe(-2);\n  expect(() => evaluateExpression('')).toThrow();\n});\n"})}),"\n",(0,l.jsx)(n.h4,{id:"4-\u6e2c\u8a66\u932f\u8aa4\u8655\u7406",children:"4. \u6e2c\u8a66\u932f\u8aa4\u8655\u7406"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"it('should handle errors', async () => {\n  const res = await request(app)\n    .post('/api/auth/login')\n    .send({ email: 'invalid' });\n\n  expect(res.status).toBe(400);\n  expect(res.body).toHaveProperty('error');\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u524d\u7aef\u6e2c\u8a66",children:"\u524d\u7aef\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a-1",children:"\u6e2c\u8a66\u74b0\u5883\u8a2d\u5b9a"}),"\n",(0,l.jsx)(n.h4,{id:"1-\u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4-1",children:"1. \u5b89\u88dd\u6e2c\u8a66\u4f9d\u8cf4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd website\nnpm install --save-dev @testing-library/react @testing-library/jest-dom @testing-library/user-event jest jest-environment-jsdom\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-jest-\u914d\u7f6e-1",children:"2. Jest \u914d\u7f6e"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"website/jest.config.js"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  testEnvironment: 'jsdom',\n  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],\n  moduleNameMapper: {\n    '\\\\.(css|less|scss|sass)$': 'identity-obj-proxy',\n  },\n};\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"website/jest.setup.js"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import '@testing-library/jest-dom';\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5143\u4ef6\u6e2c\u8a66",children:"\u5143\u4ef6\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.h4,{id:"\u6e2c\u8a66-calculator-\u5143\u4ef6",children:"\u6e2c\u8a66 Calculator \u5143\u4ef6"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"website/src/components/demo/__tests__/CalculatorDemo.test.tsx"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { render, fireEvent, screen } from '@testing-library/react';\nimport CalculatorDemo from '../CalculatorDemo';\n\ndescribe('CalculatorDemo', () => {\n  it('should render calculator', () => {\n    render(<CalculatorDemo />);\n    expect(screen.getByText('0')).toBeInTheDocument();\n  });\n\n  it('should display numbers when clicked', () => {\n    render(<CalculatorDemo />);\n    \n    fireEvent.click(screen.getByText('2'));\n    expect(screen.getByText('2')).toBeInTheDocument();\n    \n    fireEvent.click(screen.getByText('3'));\n    expect(screen.getByText('23')).toBeInTheDocument();\n  });\n\n  it('should calculate addition', () => {\n    render(<CalculatorDemo />);\n    \n    fireEvent.click(screen.getByText('2'));\n    fireEvent.click(screen.getByText('+'));\n    fireEvent.click(screen.getByText('3'));\n    fireEvent.click(screen.getByText('='));\n    \n    expect(screen.getByText('5')).toBeInTheDocument();\n  });\n\n  it('should clear display', () => {\n    render(<CalculatorDemo />);\n    \n    fireEvent.click(screen.getByText('5'));\n    fireEvent.click(screen.getByText('C'));\n    \n    expect(screen.getByText('0')).toBeInTheDocument();\n  });\n\n  it('should show history', () => {\n    render(<CalculatorDemo />);\n    \n    // \u57f7\u884c\u8a08\u7b97\n    fireEvent.click(screen.getByText('2'));\n    fireEvent.click(screen.getByText('+'));\n    fireEvent.click(screen.getByText('3'));\n    fireEvent.click(screen.getByText('='));\n    \n    // \u6aa2\u67e5\u6b77\u53f2\n    expect(screen.getByText('= 5')).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u57f7\u884c\u524d\u7aef\u6e2c\u8a66",children:"\u57f7\u884c\u524d\u7aef\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd website\nnpm test\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u4f7f\u7528\u8005\u4e92\u52d5",children:"\u6e2c\u8a66\u4f7f\u7528\u8005\u4e92\u52d5"}),"\n",(0,l.jsx)(n.h4,{id:"\u4f7f\u7528-userevent",children:"\u4f7f\u7528 userEvent"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import userEvent from '@testing-library/user-event';\n\nit('should handle user input', async () => {\n  const user = userEvent.setup();\n  render(<LoginForm />);\n  \n  const emailInput = screen.getByLabelText('Email');\n  await user.type(emailInput, 'test@example.com');\n  \n  expect(emailInput).toHaveValue('test@example.com');\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66-api-\u547c\u53eb",children:"\u6e2c\u8a66 API \u547c\u53eb"}),"\n",(0,l.jsx)(n.h4,{id:"mock-api",children:"Mock API"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"import { rest } from 'msw';\nimport { setupServer } from 'msw/node';\n\nconst server = setupServer(\n  rest.post('/api/auth/login', (req, res, ctx) => {\n    return res(ctx.json({ token: 'fake-token' }));\n  })\n);\n\nbeforeAll(() => server.listen());\nafterEach(() => server.resetHandlers());\nafterAll(() => server.close());\n\nit('should login successfully', async () => {\n  render(<LoginForm />);\n  \n  // \u586b\u5beb\u8868\u55ae\n  // \u63d0\u4ea4\n  // \u9a57\u8b49\u7d50\u679c\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u6e2c\u8a66\u7b56\u7565",children:"\u6e2c\u8a66\u7b56\u7565"}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u91d1\u5b57\u5854",children:"\u6e2c\u8a66\u91d1\u5b57\u5854"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"       /\\\n      /  \\     E2E \u6e2c\u8a66\uff08\u5c11\u91cf\uff09\n     /____\\\n    /      \\   \u6574\u5408\u6e2c\u8a66\uff08\u9069\u91cf\uff09\n   /________\\\n  /          \\ \u55ae\u5143\u6e2c\u8a66\uff08\u5927\u91cf\uff09\n /____________\\\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u8986\u84cb\u7387\u76ee\u6a19",children:"\u6e2c\u8a66\u8986\u84cb\u7387\u76ee\u6a19"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u55ae\u5143\u6e2c\u8a66"}),"\uff1a> 80%"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6574\u5408\u6e2c\u8a66"}),"\uff1a\u95dc\u9375\u6d41\u7a0b 100%"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"E2E \u6e2c\u8a66"}),"\uff1a\u4e3b\u8981\u4f7f\u7528\u8005\u6d41\u7a0b"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u6e2c\u8a66\u6aa2\u67e5\u6e05\u55ae",children:"\u6e2c\u8a66\u6aa2\u67e5\u6e05\u55ae"}),"\n",(0,l.jsx)(n.h4,{id:"\u5f8c\u7aef",children:"\u5f8c\u7aef"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6240\u6709 API \u7aef\u9ede\u90fd\u6709\u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6e2c\u8a66\u6210\u529f\u548c\u5931\u6557\u60c5\u6cc1"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6e2c\u8a66\u8a8d\u8b49\u548c\u6388\u6b0a"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6e2c\u8a66\u8f38\u5165\u9a57\u8b49"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6e2c\u8a66\u932f\u8aa4\u8655\u7406"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u524d\u7aef",children:"\u524d\u7aef"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u5143\u4ef6\u6e32\u67d3\u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u4f7f\u7528\u8005\u4e92\u52d5\u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u8868\u55ae\u9a57\u8b49\u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","API \u6574\u5408\u6e2c\u8a66"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u932f\u8aa4\u72c0\u614b\u6e2c\u8a66"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"cicd-\u6574\u5408",children:"CI/CD \u6574\u5408"}),"\n",(0,l.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:".github/workflows/test.yml"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"name: Tests\n\non: [push, pull_request]\n\njobs:\n  backend-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      - name: Install dependencies\n        run: cd backend && npm ci\n      - name: Run tests\n        run: cd backend && npm test\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n\n  frontend-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n      - name: Install dependencies\n        run: cd website && npm ci\n      - name: Run tests\n        run: cd website && npm test\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5e38\u898b\u554f\u984c",children:"\u5e38\u898b\u554f\u984c"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Q: \u6e2c\u8a66\u57f7\u884c\u5f88\u6162\u600e\u9ebc\u8fa6\uff1f"}),(0,l.jsx)(n.br,{}),"\n","A: \u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"--maxWorkers=50%"})," \u9650\u5236\u4e26\u884c\u6578\u91cf"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Q: \u5982\u4f55\u6e2c\u8a66\u975e\u540c\u6b65\u7a0b\u5f0f\u78bc\uff1f"}),(0,l.jsx)(n.br,{}),"\n","A: \u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"async/await"})," \u6216 ",(0,l.jsx)(n.code,{children:"done"})," callback"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Q: \u5982\u4f55 mock \u5916\u90e8\u4f9d\u8cf4\uff1f"}),(0,l.jsx)(n.br,{}),"\n","A: \u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"jest.mock()"})," \u6216 MSW"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Q: \u6e2c\u8a66\u8986\u84cb\u7387\u8981\u9054\u5230\u591a\u5c11\uff1f"}),(0,l.jsx)(n.br,{}),"\n","A: \u5efa\u8b70 > 80%\uff0c\u4f46\u91cd\u8cea\u4e0d\u91cd\u91cf"]}),"\n",(0,l.jsx)(n.h2,{id:"\u7e3d\u7d50",children:"\u7e3d\u7d50"}),"\n",(0,l.jsx)(n.p,{children:"\u826f\u597d\u7684\u6e2c\u8a66\u7b56\u7565\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 \u81ea\u52d5\u5316\u6e2c\u8a66"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 \u5feb\u901f\u56de\u994b"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 \u9ad8\u8986\u84cb\u7387"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 \u6613\u65bc\u7dad\u8b77"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 CI/CD \u6574\u5408"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u958b\u59cb\u70ba\u4f60\u7684\u5c08\u6848\u64b0\u5beb\u6e2c\u8a66\u5427\uff01"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(6540);const l={},i=t.createContext(l);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);